<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HandiMapped – Home</title>
  <!--Leaflet CSS, not sure how it works-->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <!--I moved the style of more general elements to the style.css file-->
  <link rel="stylesheet" href="style.css"/>
  <style>
    #map {
      height: 400px;
      margin: 20px;
      border: 2px solid #ccc;
      border-radius: 6px;
    }
    #searchBar {
      padding: 8px;
      margin: 20px;
      width: 90%;
      max-width: 400px;
      display: block;
    }
    #buildingList {
      margin: 20px;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-content">
      <ul class="menu">
        <li class="item"><a href="index.html">Home</a></li>
        <li class="item"><a href="report.html">Report</a></li>
        <li class="item"><a href="about.html">About Us</a></li>
      </ul>
    </div>
  </nav>

  <!-- Map -->
  <div id="map" style="height:500px;"></div>

  <!-- Search + Building List -->
  <div style="padding:20px; background:#5a8672; color:black;">
    <input type="text" id="search" placeholder="Search buildings..." style="width:100%; padding:8px; margin-bottom:10px;">
    
    <!-- Building list -->
    <ul id="building-list">
      <li><a href="#" data-building="Cathedral of Learning">Cathedral of Learning</a></li>
      <li><a href="#" data-building="Information Science Building">Information Science Building</a></li>
    </ul>

    <!-- Review output goes here -->
    <div id="building-review" style="
        margin-top:20px; 
        padding:15px; 
        background:#fff; 
        border-radius:8px; 
        border:1px solid #ccc;
        display:none;">
    </div>
  </div>

  <!-- Your existing Leaflet + marker scripts go here -->
  <script>
    // Function to get latest review for a building
    function getReview(building) {
      let saved = localStorage.getItem(building);
      if (saved) {
        let r = JSON.parse(saved);
        return `
          <h3>${building}</h3>
          <p><b>Rating:</b> ${"⭐".repeat(r.stars)}</p>
          <p><b>Review:</b> ${r.review}</p>
          <p><b>By:</b> ${r.name}</p>
          <p><b>Date:</b> ${r.date}</p>
        `;
      } else {
        return `<h3>${building}</h3><p>No reviews yet.</p>`;
      }
    }

    // Click handler for building names
    document.querySelectorAll("#building-list a").forEach(link => {
      link.addEventListener("click", function(e) {
        e.preventDefault();
        const building = this.dataset.building;
        const reviewBox = document.getElementById("building-review");
        reviewBox.innerHTML = getReview(building);
        reviewBox.style.display = "block";
      });
    });
  </script>
</body>

</html>
