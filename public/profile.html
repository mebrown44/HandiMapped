<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HandiMapped – Building Profile</title>
  <link rel="icon" type="image/png" href="panther.png">
  <link rel="stylesheet" href="style.css">
  <style>
    .mission {
      padding: 30px;
      text-align: center;
      color: #1e140b;
    }
    .team {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      padding: 30px;
    }
    .member {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .photo img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 50%;
      margin-bottom: 10px;
    }
    .review-img {
      width: 200px;
      height: auto;
      border-radius: 6px;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>Building Profile</h1>
    <nav class="navbar">
      <div class="navbar-content">
        <ul class="menu">
          <li class="item"><a href="index.html">Home</a></li>
          <li class="item"><a href="report.html">Report</a></li>
          <li class="item"><a href="about.html">About Us</a></li>
        </ul>
        
        <a href="https://steelhacks.org/" target="_blank">
          <button>SteelHacks XII</button>
        </a>
      </div>
    </nav>
  </header>

  <div class="report-container">
    <select id="building" onchange="populateData()" required>
    <option value="">-- Select a building --</option>
    </select>

    <section id="building-details">
      <h2>Select a building to see details</h2>
    </section>
  </div>

  

  <!--section class="Cathy">
    <h2>Cathedral of Learning</h2>
    <ul>
      <li>Bad Wi-Fi connection in many areas.</li>
      <li>No elevator access to the second floor.</li>
      <li>Wood seating makes it uncomfortable for elders to sit.</li>
      <li>Sharp corners on ramps make wheelchair access difficult.</li>
      <li>Handicapped seats are in a tight corner all the way in back</li>
    </ul>
    <img src="elevator.png" alt="Elevator" class="review-img">
    <img src="IMG_6040.png" alt="Placeholder" class="review-img">
    <img src="cathy2.png" alt="Elevator" class="review-img">
    <img src="cathy3.png" alt="Placeholder" class="review-img">
    <img src="cathy4.png" alt="Placeholder" class="review-img">
    <img src="cathy5.png" alt="Placeholder" class="review-img">
    <img src="cathy6.png" alt="Placeholder" class="review-img">

    <h2>Information Science</h2>
    <ul>
      <li>Wheelchair access ramp exists but is very narrow.</li>
      <li>Ramp has three sharp uphill corners that make it hard for users.</li>
      <li>Construction nearby makes it harder to access the building.</li>
      <li>Staircase is narrow, elevators are small.</li>
      <li>Have to go through 3 different doors to get to the women's restroom IN the stairwell.</li>
    </ul>
    <img src="sharpcorneris.png" alt="Sharp corner" class="review-img">
    <img src="is1.png" alt="bello" class="review-img">
    <img src="is2.png" alt="bello" class="review-img">
    <img src="is3.png" alt="bello" class="review-img">
    <img src="is4.png" alt="bello" class="review-img">
    <img src="is5.png" alt="bello" class="review-img">
  </section-->

  <footer>
    <p>&copy; 2025 HandiMapped Team</p>
  </footer>

  <script>
    const buildingExtras = {
      "Cathedral of Learning": {
        description: [
          "Bad Wi-Fi connection in many areas.",
          "No elevator access to the second floor.",
          "Wood seating makes it uncomfortable for elders to sit.",
          "Sharp corners on ramps make wheelchair access difficult.",
          "Handicapped seats are in a tight corner all the way in back."
        ],
        images: [
          "elevator.png",
          "IMG_6040.png",
          "cathy2.png",
          "cathy3.png",
          "cathy4.png",
          "cathy5.png",
          "cathy6.png"
        ]
      },
      "Information Science": {
        description: [
          "Wheelchair access ramp exists but is very narrow.",
          "Ramp has three sharp uphill corners that make it hard for users.",
          "Construction nearby makes it harder to access the building.",
          "Staircase is narrow, elevators are small.",
          "Have to go through 3 different doors to get to the women's restroom in the stairwell."
        ],
        images: [
          "sharpcorneris.png",
          "is1.png",
          "is2.png",
          "is3.png",
          "is4.png",
          "is5.png"
        ]
      }
    };

    loadBuildings();

    async function loadBuildings() {
      try {
        // Works on both localhost and Vercel
        const res = await fetch('https://handimapped.com/api/conn?action=GETBUILD');
        if (!res.ok) {
          console.error('HTTP error', res.status);
          return;
        }

        const buildings = await res.json();

        const select = document.getElementById("building");

        buildings.forEach(b => {
          const option = document.createElement("option");
          option.value = b.NAME;   // or b.CODE if you want numeric code
          option.textContent = b.NAME;
          select.appendChild(option);
        });
      } catch (err) {
        console.error('Fetch failed', err);
      }
    }

    async function populateData() {
      try {
        const res = await fetch('https://handimapped.com/api/conn?action=GETBUILD');
        if (!res.ok) {
          console.error('HTTP error', res.status);
          return;
        }

        const buildings = await res.json();
        const select = document.getElementById("building");
        const chosen = select.value;

        const building = buildings.find(b => b.NAME === chosen);
        if (!building) return;

        const details = document.getElementById("building-details");
        let html = `
          <h2>${building.NAME}</h2>
          <ul>
            <li><b>Address:</b> ${building.ADDRESS || 'N/A'}</li>
            <li><b>Rating:</b> ${building.RATING ? "⭐".repeat(Math.round(building.RATING)) : 'No ratings yet'}</li>
            <li><b>Accessibility:</b> ${building.ACCESSIBILITY || 'N/A'}</li>
            <li><b>Fire Data:</b> ${building.FIRE_DATA || 'N/A'}</li>
          </ul>
        `;

        // Add extra data if available
        const extra = buildingExtras[building.NAME];
        if (extra) {
          // description list
          html += "<h3>Description</h3><ul>";
          extra.description.forEach(d => {
            html += `<li>${d}</li>`;
          });
          html += "</ul>";

          // slider
          html += `
            <div class="slider" id="slider">
              ${extra.images.map((img, i) => 
                `<img src="${img}" class="${i === 0 ? 'active' : ''}" alt="${building.NAME} image">`
              ).join("")}
              <button class="prev" onclick="prevSlide()">❮</button>
              <button class="next" onclick="nextSlide()">❯</button>
            </div>
          `;
        }

        let currentSlide = 0;
        details.innerHTML = html;

      } catch (err) {
        console.error('Fetch failed', err);
      }
    }

    function showSlide(n) {
      const slides = document.querySelectorAll("#slider img");
      if (!slides.length) return;
      currentSlide = (n + slides.length) % slides.length;
      slides.forEach((img, i) => {
        img.classList.toggle("active", i === currentSlide);
      });
    }
    function prevSlide() { showSlide(currentSlide - 1); }
    function nextSlide() { showSlide(currentSlide + 1); }
  </script>
</body>
</html>

